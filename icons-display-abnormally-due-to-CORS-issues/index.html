<!DOCTYPE html><html lang="zh"><head><meta name="google-site-verification" content="6dKXSVBE3ZyVxHtiFCvc57UwP5MEzcp51X7Wn5okSoE"><link rel="icon" href="/api/images/tianzhen.jpg"><script>document.addEventListener("DOMContentLoaded",function(){var e;768<=(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)&&((e=document.createElement("script")).src="/api/js/fireworks.min.js",document.head.appendChild(e),(e=document.createElement("script")).src="/api/js/background.min.js",document.head.appendChild(e),(e=document.createElement("script")).src="/api/js/cursor.min.js",document.head.appendChild(e),(e=document.createElement("canvas")).id="fireworks",e.style.cssText="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; pointer-events: none; z-index: 32767",document.body.appendChild(e),(e=document.createElement("canvas")).id="background",e.style.cssText="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; pointer-events: none; z-index: -1",document.body.appendChild(e),(e=document.createElement("div")).id="cursor",document.body.appendChild(e))})</script><meta charset="utf-8"><title>因为CORS导致的fontawesome图标显示异常 | Tianzhen</title><meta name="author" content="Tianzhen"><meta name="description" content="My Learning Journey Blog"><meta name="keywords" content="seo优化 javaweb教程 网络技术分享"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0"><link rel="preconnect" href="https://cdn.staticfile.org"><link rel="preconnect" href="https://twikoo.lt514.com"><link rel="preconnect" href="https://umami.hoshiroko.com"><link rel="preconnect" href="/api"><script src="/api/js/vue.global.prod.min.js"></script><script src="/api/js/anime.min.js"></script><script async src="https://umami.hoshiroko.com/script.js" data-website-id="6c968d09-0bb6-4304-a28c-7944d8474aad"></script><link rel="stylesheet" href="/api/fontawesome/fontawesome6.5.1/css/all.min.css"><link rel="stylesheet" href="/api/css/fonts/fonts.loli.net.min.css"><script>const mixins={}</script><script src="/api/js/highlight.min.js"></script><script src="/api/js/highlightjs-line-numbers.min.js"></script><link rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/11.9.0/styles/github.min.css"><script src="/api/js/lib/highlight.js"></script><script src="https://cdn.staticfile.org/KaTeX/0.16.9/katex.min.js"></script><script src="https://cdn.staticfile.org/KaTeX/0.16.9/contrib/auto-render.min.js"></script><link rel="stylesheet" href="https://cdn.staticfile.org/KaTeX/0.16.9/katex.min.css"><script src="/api/js/lib/math.js"></script><script src="/api/js/lib/preview.js"></script><script src="/api/js/twikoo.all.min.js"></script><link rel="stylesheet" href="/api/css/main.css"><style>.flex-container{display:flex;justify-content:center;align-items:center;height:100vh}</style><meta name="generator" content="Hexo 6.3.0"></head><script>var st,OriginTitile=document.title;document.addEventListener("visibilitychange",function(){document.hidden?(document.title="o(இ௰இ)怎么就走了！",clearTimeout(st)):(document.title="☆*o(≧▽≦)o*☆欢迎回来！",st=setTimeout(function(){document.title=OriginTitile},3e3))})</script><body><div id="layout"><transition name="fade"><div id="loading" v-show="loading"><div id="loading-circle"><h2>LOADING</h2><p>加载过慢请开启缓存 浏览器默认开启</p><img src="/api/images/loading.gif"></div></div></transition><div id="menu" :class="{ hidden: hiddenMenu, 'menu-color': menuColor}"><nav id="desktop-menu"><a class="title" href="/"><span>TIANZHEN</span> </a><a href="/"><i class="fa-solid fa-house fa-fw"></i> <span>&ensp;Home</span> </a><a href="/about"><i class="fa-solid fa-id-card fa-fw"></i> <span>&ensp;About</span> </a><a href="/archives"><i class="fa-solid fa-box-archive fa-fw"></i> <span>&ensp;Archives</span> </a><a href="/categories"><i class="fa-solid fa-bookmark fa-fw"></i> <span>&ensp;Categories</span> </a><a href="/tags"><i class="fa-solid fa-tags fa-fw"></i> <span>&ensp;Tags</span> </a><a target="_blank" rel="noopener" href="https://umami.hoshiroko.com/share/jpoapxn7zGXoKcSv/tianzhentech"><i class="fa-solid fa-chart-column fa-fw"></i> <span>&ensp;Umami</span></a></nav><nav id="mobile-menu"><div class="title" @click="showMenuItems = !showMenuItems"><i class="fa-solid fa-bars fa-fw"></i> <span>&emsp;TIANZHEN</span></div><transition name="slide"><div class="items" v-show="showMenuItems"><a href="/"><div class="item"><div style="min-width:20px;max-width:50px;width:10%"><i class="fa-solid fa-house fa-fw"></i></div><div style="min-width:100px;max-width:150%;width:20%">Home</div></div></a><a href="/about"><div class="item"><div style="min-width:20px;max-width:50px;width:10%"><i class="fa-solid fa-id-card fa-fw"></i></div><div style="min-width:100px;max-width:150%;width:20%">About</div></div></a><a href="/archives"><div class="item"><div style="min-width:20px;max-width:50px;width:10%"><i class="fa-solid fa-box-archive fa-fw"></i></div><div style="min-width:100px;max-width:150%;width:20%">Archives</div></div></a><a href="/categories"><div class="item"><div style="min-width:20px;max-width:50px;width:10%"><i class="fa-solid fa-bookmark fa-fw"></i></div><div style="min-width:100px;max-width:150%;width:20%">Categories</div></div></a><a href="/tags"><div class="item"><div style="min-width:20px;max-width:50px;width:10%"><i class="fa-solid fa-tags fa-fw"></i></div><div style="min-width:100px;max-width:150%;width:20%">Tags</div></div></a></div></transition></nav></div><transition name="fade"><div id="menu-curtain" @click="showMenuItems = !showMenuItems" v-show="showMenuItems"></div></transition><div id="main" :class="loading ? 'into-enter-from': 'into-enter-active'"><div class="article"><div><h1>因为CORS导致的fontawesome图标显示异常</h1></div><div class="info"><span class="date"><span class="icon"><i class="fa-solid fa-calendar fa-fw"></i> </span>2023/12/14 </span><span class="category"><a href="/categories/%E5%89%8D%E7%AB%AF%E7%BD%91%E9%A1%B5/"><span class="icon"><i class="fa-solid fa-bookmark fa-fw"></i> </span>前端网页 </a></span><span class="tags"><span class="icon"><i class="fa-solid fa-tags fa-fw"></i> </span><span class="tag"><a href="/tags/Hexo/" style="color:#03a9f4">Hexo</a> </span><span class="tag"><a href="/tags/ParticleX/" style="color:#ffa2c4">ParticleX</a> </span><span class="tag"><a href="/tags/CORS/" style="color:#00a596">CORS</a> </span><span class="tag"><a href="/tags/Font-Awesome/" style="color:#ff7d73">Font Awesome</a> </span><span class="tag"><a href="/tags/CDN/" style="color:#03a9f4">CDN</a></span></span></div><div class="content" v-pre><p>从昨天开始，我已经注意到了我的博客图标显示有问题，我以为是浏览器的问题，就没多理会，然后我发现我朋友的博客也出现了这个问题，我问他他那边显示有问题不，他说有，然后我才想着解决这个问题。</p><p>就像这样：</p><p><img loading="lazy" src="/../images/image-20231214012548193.png" alt="image-20231214012548193"></p><p><img loading="lazy" src="/../images/image-20231214012602349.png" alt="image-20231214012602349"></p><p>所有关于<code>fontawesome</code>的图标都沦陷了。</p><p>一开始，我以为是从url引入的<code>fontawesome</code>包有网络问题，但是我单独打开这个url是可以直接打开的（<a target="_blank" rel="noopener" href="https://cdn.staticfile.org/font-awesome/6.4.2/css/all.min.css">https://cdn.staticfile.org/font-awesome/6.4.2/css/all.min.css</a>）这也是主题作者用的包，位于<code>layout</code>文件夹下的<code>import.ejs</code>文件中的前几行。</p><p>后来我又了解到要想使<code>fontawesome</code>的<code>all.min.css</code>能正常加载，正常显示图标，必须得引入对应包下的<code>fonts</code>文件夹，我转而想到，有可能是作者cdn中的<code>webfonts</code>包不能正常加载。</p><p>我第一个想到的办法是：</p><blockquote><h3><span id="将整个fontawesome包放在博客仓库下">将整个<code>fontawesome</code>包放在博客仓库下。</span></h3></blockquote><p>这很简单，这样解决：</p><ol><li><p><strong>从<a target="_blank" rel="noopener" href="https://fontawesome.com/download"><code>fontawesome</code></a>官网下载对应的web包。（6.5.1）</strong></p></li><li><p><strong>修改一下文件名<code>fontawesome6.5.1</code>，复制到到博客主题下的<code>source</code>目录。</strong></p></li><li><p><strong>打开主题目录下的<code>layout</code>文件夹，修改其中的<code>import.ejs</code>文件，找到第三行：</strong></p><pre><code class="html">&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.staticfile.org/font-awesome/6.4.2/css/all.min.css&quot; /&gt;
</code></pre><p>修改为：</p><pre><code class="html">&lt;link rel=&quot;stylesheet&quot; href=&quot;/fontawesome6.5.1/css/all.min.css&quot; /&gt;
</code></pre><p>这将从博客的根目录下查找这个文件，因为放到source文件夹下的文件，被渲染后将放在博客仓库的根目录下。</p></li><li><p><strong>hexo g，hexo d。</strong></p></li></ol><p>但是我很快发现了这样解决的问题，从根目录下搜寻文件很浪费性能，导致加载速度很慢，直接的结果就是，我的博客加载速度长了一两秒。</p><p>这我肯定是不能满意的，于是我想到像图床一样，在<code>netlify</code>再建一个仓库，将<code>fontawesome</code>包放进去，然后通过url引入到我的博客中。</p><p>可是我遇到了很奇怪的事情，我试了很多次，最后还是加载异常，我甚至很玄学的把<code>all.min.css</code>文件放在二级目录下，因为作者的url就是这样的结构，但还是不行，我测试了我这个仓库的全国延迟：</p><p><img loading="lazy" src="/../images/image-20231214020926885.png" alt="image-20231214020926885"></p><p>我把图标显示异常的原因归结于<code>netlify</code>的不给力，但是我单独在浏览器中访问该仓库的url，是能够正常显示<code>all.min.css</code>的内容的，我还检查了<code>all.min.css</code>的最后几行引入<code>webfonts</code>的代码（这是压缩过的，显得很拥挤）：</p><pre><code class="css">font-display:block;src:url(../webfonts/fa-regular-400.woff2) format(&quot;woff2&quot;),url(../webfonts/fa-regular-400.ttf) format(&quot;truetype&quot;)&#125;.fa-regular,.far&#123;font-weight:400&#125;:host,:root&#123;--fa-style-family-classic:&quot;Font Awesome 6 Free&quot;;--fa-font-solid:normal 900 1em/1 &quot;Font Awesome 6 Free&quot;&#125;@font-face&#123;font-family:&quot;Font Awesome 6 Free&quot;;font-style:normal;font-weight:900;font-display:block;src:url(../webfonts/fa-solid-900.woff2) format(&quot;woff2&quot;),url(../webfonts/fa-solid-900.ttf) format(&quot;truetype&quot;)&#125;.fa-solid,.fas&#123;font-weight:900&#125;@font-face&#123;font-family:&quot;Font Awesome 5 Brands&quot;;font-display:block;font-weight:400;src:url(../webfonts/fa-brands-400.woff2) format(&quot;woff2&quot;),url(../webfonts/fa-brands-400.ttf) format(&quot;truetype&quot;)&#125;@font-face&#123;font-family:&quot;Font Awesome 5 Free&quot;;font-display:block;font-weight:900;src:url(../webfonts/fa-solid-900.woff2) format(&quot;woff2&quot;),url(../webfonts/fa-solid-900.ttf) format(&quot;truetype&quot;)&#125;@font-face&#123;font-family:&quot;Font Awesome 5 Free&quot;;font-display:block;font-weight:400;src:url(../webfonts/fa-regular-400.woff2) format(&quot;woff2&quot;),url(../webfonts/fa-regular-400.ttf) format(&quot;truetype&quot;)&#125;@font-face&#123;font-family:&quot;FontAwesome&quot;;font-display:block;src:url(../webfonts/fa-solid-900.woff2) format(&quot;woff2&quot;),url(../webfonts/fa-solid-900.ttf) format(&quot;truetype&quot;)&#125;@font-face&#123;font-family:&quot;FontAwesome&quot;;font-display:block;src:url(../webfonts/fa-brands-400.woff2) format(&quot;woff2&quot;),url(../webfonts/fa-brands-400.ttf) format(&quot;truetype&quot;)&#125;@font-face&#123;font-family:&quot;FontAwesome&quot;;font-display:block;src:url(../webfonts/fa-regular-400.woff2) format(&quot;woff2&quot;),url(../webfonts/fa-regular-400.ttf) format(&quot;truetype&quot;);unicode-range:u+f003,u+f006,u+f014,u+f016-f017,u+f01a-f01b,u+f01d,u+f022,u+f03e,u+f044,u+f046,u+f05c-f05d,u+f06e,u+f070,u+f087-f088,u+f08a,u+f094,u+f096-f097,u+f09d,u+f0a0,u+f0a2,u+f0a4-f0a7,u+f0c5,u+f0c7,u+f0e5-f0e6,u+f0eb,u+f0f6-f0f8,u+f10c,u+f114-f115,u+f118-f11a,u+f11c-f11d,u+f133,u+f147,u+f14e,u+f150-f152,u+f185-f186,u+f18e,u+f190-f192,u+f196,u+f1c1-f1c9,u+f1d9,u+f1db,u+f1e3,u+f1ea,u+f1f7,u+f1f9,u+f20a,u+f247-f248,u+f24a,u+f24d,u+f255-f25b,u+f25d,u+f271-f274,u+f278,u+f27b,u+f28c,u+f28e,u+f29c,u+f2b5,u+f2b7,u+f2ba,u+f2bc,u+f2be,u+f2c0-f2c1,u+f2c3,u+f2d0,u+f2d2,u+f2d4,u+f2dc&#125;@font-face&#123;font-family:&quot;FontAwesome&quot;;font-display:block;src:url(../webfonts/fa-v4compatibility.woff2) format(&quot;woff2&quot;),url(../webfonts/fa-v4compatibility.ttf)
</code></pre><p>但是是没有问题的，都是通过相对路径的方式<code>../webfonts</code>，只要我正常引入整个<code>fontawesome</code>包，肯定是不影响<code>webfonts</code>的引入的，这让我很头大，我只能把问题归结于网络。</p><p>于是，我尝试了理论上不存在网络问题的<code>阿里云OSS</code>，我把<code>fontawesome</code>放入一个<code>bucket</code>中，还绑了一个域名，甚至把权限改为了<code>公共读写</code>，但是问题依然没有得到解决，于是，我暂时放弃了这个方法。</p><p>我想到了另外一种方法：</p><blockquote><h3><span id="使用其他cdn下的fontawesome">使用其他cdn下的<code>fontawesome</code>。</span></h3></blockquote><ul><li><strong>使用<code>jsdelivr</code>的cdn：</strong><a target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css">https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css</a></li></ul><p>全国延迟测试：</p><p><img loading="lazy" src="/../images/image-20231214022423788.png" alt="image-20231214022423788"></p><ul><li><strong>使用官方的FontAwesome CDN：</strong><a target="_blank" rel="noopener" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css</a></li></ul><p>全国延迟测试：</p><p><img loading="lazy" src="/../images/image-20231214022656656.png" alt="image-20231214022656656"></p><p>感觉差不多，但是距离原作者的cdn：</p><p><img loading="lazy" src="/../images/image-20231214022849194.png" alt="image-20231214022849194"></p><p>还是差距有点大。</p><p>我是不满意的，但是没办法，我还是对自建仓库的方案耿耿于怀，为啥不能正常加载？</p><p>我突然想到可以查看一下浏览器控制台的输出，有什么报错。（我之前一直没有看浏览器后台的习惯！！！）</p><p>然后我发现了新大陆：</p><pre><code>Access to font at &#39;https://cdn.staticfile.org/font-awesome/6.4.2/webfonts/fa-solid-900.woff2&#39; from origin &#39;http://localhost:4000&#39; has been blocked by CORS policy: The &#39;Access-Control-Allow-Origin&#39; header has a value &#39;https://www.pil0txia.com&#39; that is not equal to the supplied origin.
fa-solid-900.woff2:1 Failed to load resource: net::ERR_FAILED
localhost/:1 Access to font at &#39;https://cdn.staticfile.org/font-awesome/6.4.2/webfonts/fa-brands-400.woff2&#39; from origin &#39;http://localhost:4000&#39; has been blocked by CORS policy: The &#39;Access-Control-Allow-Origin&#39; header has a value &#39;https://www.mikuclub.win&#39; that is not equal to the supplied origin.
fa-brands-400.woff2:1 Failed to load resource: net::ERR_FAILED
VM25:1 [Deprecation] &#39;window.webkitStorageInfo&#39; is deprecated. Please use &#39;navigator.webkitTemporaryStorage&#39; or &#39;navigator.webkitPersistentStorage&#39; instead.
V @ VM25:1
fireworks.min.js:1 Uncaught ReferenceError: anime is not defined
    at fireworks.min.js:1
    at fireworks.min.js:1
localhost/:1 Access to font at &#39;https://cdn.staticfile.org/font-awesome/6.4.2/webfonts/fa-solid-900.ttf&#39; from origin &#39;http://localhost:4000&#39; has been blocked by CORS policy: The &#39;Access-Control-Allow-Origin&#39; header has a value &#39;https://www.mikuclub.win&#39; that is not equal to the supplied origin.
fa-solid-900.ttf:1 Failed to load resource: net::ERR_FAILED
localhost/:1 Access to font at &#39;https://cdn.staticfile.org/font-awesome/6.4.2/webfonts/fa-brands-400.ttf&#39; from origin &#39;http://localhost:4000&#39; has been blocked by CORS policy: The &#39;Access-Control-Allow-Origin&#39; header has a value &#39;https://www.mikuclub.win&#39; that is not equal to the supplied origin.
fa-brands-400.ttf:1 Failed to load resource: net::ERR_FAILED
content.js:30 Uncaught DOMException: Failed to execute &#39;getRangeAt&#39; on &#39;Selection&#39;: 0 is not a valid index.
    at HTMLDocument.checkContextMenuInSelection (chrome-extension://hgploeanmefhfpokeenldbnhbnmnlplj/scripts/content.js:30:33)
</code></pre><blockquote><h3><span id="一直频繁出现的一个词cors不禁好奇什么是cors">一直频繁出现的一个词<code>CORS</code>，不禁好奇，什么是<code>CORS</code>?</span></h3></blockquote><p><em>CORS（Cross-Origin Resource Sharing）是一种浏览器安全策略，用于控制在不同源（Origin）之间进行的Web页面间的资源共享。同源策略是一种浏览器安全机制，阻止网页从一个源加载的脚本或资源与来自另一个源的文档进行交互。</em></p><p><em>CORS通过在HTTP请求和响应头中添加一些额外的信息来允许或拒绝跨域请求。例如，当从一个域的网页尝试请求另一个域的资源时，目标服务器可以通过在响应头中包含正确的 <code>Access-Control-Allow-Origin</code> 值来允许请求，否则浏览器将阻止该请求。</em></p><p><em>简而言之，CORS允许服务器声明哪些域有权限访问其资源，以增加Web应用程序的安全性。</em></p><p>就是说在我的域名下，访问了不属于我域名下的资源，被浏览器禁止了，那，怎么解决呢？</p><blockquote><p>解决这个问题的方法有两个：</p></blockquote><h4><span id="1-配置cdn服务器支持cors">1. 配置CDN服务器支持CORS</span></h4><p>如果您有权访问CDN服务器（<code>https://cdn.staticfile.org</code>），您可以在CDN服务器上配置CORS规则，以允许来自特定域的跨域请求。在CDN服务器上的配置文件中添加以下头部：</p><pre><code class="xml">&lt;AccessControlAllowOrigin&gt;你的域名&lt;/AccessControlAllowOrigin&gt;
</code></pre><p>请确保将 <code>&lt;AccessControlAllowOrigin&gt;</code> 的值设置为您的Netlify域名。</p><h4><span id="2-使用支持cors的cdn或其他服务">2. 使用支持CORS的CDN或其他服务</span></h4><p>如果您无法直接配置CDN服务器，可以考虑使用已经配置了CORS的CDN服务，或者使用支持CORS的其他服务。</p><p>例如，您可以考虑使用官方的FontAwesome CDN（刚才已经用过）：</p><pre><code class="html">&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css&quot; integrity=&quot;sha512-...&quot; crossorigin=&quot;anonymous&quot; /&gt;
</code></pre><p>在这种情况下，<code>crossorigin=&quot;anonymous&quot;</code> 表示使用匿名身份验证，而不会发送用户的凭据（例如cookie）。</p><p>总的来说，解决问题的关键是确保字体资源的响应头中包含了正确的 <code>Access-Control-Allow-Origin</code> 头部，并且与请求的域名匹配。</p><blockquote><h3><span id="但是我显然无法控制原作者的cdn那怎么办">但是我显然无法控制原作者的cdn，那怎么办？</span></h3></blockquote><h4><span id="1-使用代理">1. 使用代理</span></h4><p>您可以在自己的服务器上设置一个代理，通过代理来获取字体文件。这个代理服务器可以将来自 <code>https://cdn.staticfile.org</code> 的请求转发到原始服务器，并将响应返回给您的网页。这样，由于请求是从您的域发出的，就避免了浏览器的同源策略和CORS问题。</p><h5><span id="代理服务器的实现">代理服务器的实现</span></h5><p>您可以使用Node.js、Express等构建一个简单的代理服务器。以下是一个基本的示例：</p><p>1.安装 Node.js 和 Express（如果尚未安装）：</p><pre><code class="bash">npm install express
</code></pre><p>2.创建一个代理服务器脚本（proxy.js）：</p><pre><code class="javascript">econst express = require(&#39;express&#39;);
const &#123; createProxyMiddleware &#125; = require(&#39;http-proxy-middleware&#39;);

const app = express();

app.use(&#39;/font-awesome&#39;, createProxyMiddleware(&#123;
  target: &#39;https://cdn.staticfile.org&#39;,
  changeOrigin: true,
  pathRewrite: &#123; &#39;^/font-awesome&#39;: &#39;/&#39; &#125;,
&#125;));

const PORT = 3000;
app.listen(PORT, () =&gt; &#123;
  console.log(`Proxy server is running on port $&#123;PORT&#125;`);
&#125;);
</code></pre><p>3.运行代理服务器：</p><pre><code class="bash">node proxy.js
</code></pre><p>4.在您的网页中，将字体文件的请求路径修改为代理服务器的路径：</p><pre><code class="html">&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.staticfile.org/font-awesome/6.4.2/css/all.min.css&quot;&gt;
</code></pre><p>修改为：</p><pre><code class="html">&lt;link rel=&quot;stylesheet&quot; href=&quot;你的域名/font-awesome/6.4.2/css/all.min.css&quot;&gt;
</code></pre><p>当然我们这里需要修改ejs文件中的url。</p><h4><span id="2-使用cors代理服务">2. 使用CORS代理服务</span></h4><p>您还可以考虑使用一些提供CORS代理服务的第三方工具。这些服务允许您通过它们的服务器发起请求，然后它们将请求转发给原始服务器，并将响应返回给您的网页。这样，您的网页就可以绕过同源策略和CORS问题。</p><p>一些常见的CORS代理服务包括：</p><ul><li><a target="_blank" rel="noopener" href="https://cors-anywhere.herokuapp.com/">CORS Anywhere</a></li></ul><p>在使用这些服务时，请确保了解服务的使用规定，并注意它们的可靠性和安全性。</p><p>总体而言，这些方法是绕过同源策略和CORS问题的替代方案。请注意，使用代理可能会导致一些性能和安全方面的考虑，因此请谨慎使用。</p><blockquote><h3><span id="那如果我使用自己的仓库呢不使用cdn呢">那如果我使用自己的仓库呢，不使用cdn呢？</span></h3></blockquote><p>如果您的FontAwesome资源托管在Netlify上，而且您在使用它们的过程中遇到了CORS问题，可以尝试以下方法解决：</p><h4><span id="1-netlify配置文件-_headers">1. Netlify配置文件 <code>_headers</code></span></h4><p>在您的Netlify项目的根目录下创建一个名为 <code>_headers</code> 的文件，并添加如下内容：</p><pre><code class="mathematica">mathematica/*
  Access-Control-Allow-Origin: *
</code></pre><p>这将在所有资源的响应中添加 <code>Access-Control-Allow-Origin</code> 头，允许任何域访问资源。请注意，这可能会导致一些安全性问题，因为它允许所有域访问资源。如果安全性是关键问题，请考虑将 <code>*</code> 替换为您允许的域。</p><h4><span id="2-netlify-functions">2. Netlify Functions</span></h4><p>如果您的FontAwesome资源是通过Netlify函数（Netlify Functions）提供的，您可以在函数中设置CORS头。以下是一个示例函数：</p><pre><code class="javascript">exports.handler = async function(event, context) &#123;
  return &#123;
    statusCode: 200,
    headers: &#123;
      &#39;Access-Control-Allow-Origin&#39;: &#39;*&#39;,
      // Add other necessary headers
    &#125;,
    body: JSON.stringify(&#123; message: &#39;Hello World&#39; &#125;),
  &#125;;
&#125;;
</code></pre><p>此函数会返回包含 <code>Access-Control-Allow-Origin</code> 头的响应。确保在您的Netlify函数中添加这个头，以允许跨域访问。</p><h4><span id="3-netlify配置文件-netlifytoml">3. Netlify配置文件 <code>netlify.toml</code></span></h4><p>如果您的项目有 <code>netlify.toml</code> 配置文件，您可以尝试在其中添加如下配置：</p><pre><code class="toml">[[headers]]
  for = &quot;/*&quot;
    [headers.values]
      Access-Control-Allow-Origin = &quot;*&quot;
</code></pre><p>这会设置所有路径的 <code>Access-Control-Allow-Origin</code> 头，允许任何域访问资源。</p><p>请注意，这些方法都是基于假设您具有对Netlify项目的足够控制权。如果FontAwesome资源是由其他服务提供的，您可能需要查看该服务的文档或联系其支持团队，以获取关于如何处理CORS问题的更多信息。</p><p>我给仓库添加了<code>_headers</code>文件，然后打开了浏览器在本地测试，居然还是显示异常，别沮丧，继续查看控制台：</p><pre><code>VM26:1 [Deprecation] &#39;window.webkitStorageInfo&#39; is deprecated. Please use &#39;navigator.webkitTemporaryStorage&#39; or &#39;navigator.webkitPersistentStorage&#39; instead.
V @ VM26:1
fireworks.min.js:1 Uncaught ReferenceError: anime is not defined
    at fireworks.min.js:1
    at fireworks.min.js:1
12Failed to decode downloaded font: &lt;URL&gt;
localhost/:1 Failed to decode downloaded font: https://tianapi.netlify.app/fontawesome/fontawesome6.5.1/webfonts/fa-solid-900.woff2
localhost/:1 Failed to decode downloaded font: https://tianapi.netlify.app/fontawesome/fontawesome6.5.1/webfonts/fa-solid-900.woff2
localhost/:1 Failed to decode downloaded font: https://tianapi.netlify.app/fontawesome/fontawesome6.5.1/webfonts/fa-solid-900.woff2
localhost/:1 Failed to decode downloaded font: https://tianapi.netlify.app/fontawesome/fontawesome6.5.1/webfonts/fa-brands-400.woff2
localhost/:1 Failed to decode downloaded font: https://tianapi.netlify.app/fontawesome/fontawesome6.5.1/webfonts/fa-brands-400.woff2
localhost/:1 Failed to decode downloaded font: https://tianapi.netlify.app/fontawesome/fontawesome6.5.1/webfonts/fa-brands-400.woff2
localhost/:1 Failed to decode downloaded font: https://tianapi.netlify.app/fontawesome/fontawesome6.5.1/webfonts/fa-solid-900.ttf
localhost/:1 Failed to decode downloaded font: https://tianapi.netlify.app/fontawesome/fontawesome6.5.1/webfonts/fa-solid-900.ttf
localhost/:1 Failed to decode downloaded font: https://tianapi.netlify.app/fontawesome/fontawesome6.5.1/webfonts/fa-solid-900.ttf
localhost/:1 Failed to decode downloaded font: https://tianapi.netlify.app/fontawesome/fontawesome6.5.1/webfonts/fa-brands-400.ttf
localhost/:1 Failed to decode downloaded font: https://tianapi.netlify.app/fontawesome/fontawesome6.5.1/webfonts/fa-brands-400.ttf
localhost/:1 Failed to decode downloaded font: https://tianapi.netlify.app/fontawesome/fontawesome6.5.1/webfonts/fa-brands-400.ttf
6OTS parsing error: Failed to convert WOFF 2.0 font to SFNT
localhost/:1 OTS parsing error: Failed to convert WOFF 2.0 font to SFNT
localhost/:1 OTS parsing error: Failed to convert WOFF 2.0 font to SFNT
localhost/:1 OTS parsing error: Failed to convert WOFF 2.0 font to SFNT
localhost/:1 OTS parsing error: Failed to convert WOFF 2.0 font to SFNT
localhost/:1 OTS parsing error: Failed to convert WOFF 2.0 font to SFNT
localhost/:1 OTS parsing error: Failed to convert WOFF 2.0 font to SFNT
localhost/:1 OTS parsing error: cmap: invalid table offset
localhost/:1 OTS parsing error: cmap: invalid table offset
localhost/:1 OTS parsing error: cmap: invalid table offset
localhost/:1 OTS parsing error: cmap: table overruns end of file
localhost/:1 OTS parsing error: cmap: table overruns end of file
localhost/:1 OTS parsing error: cmap: table overruns end of file
content.js:30 Uncaught DOMException: Failed to execute &#39;getRangeAt&#39; on &#39;Selection&#39;: 0 is not a valid index.
    at HTMLDocument.checkContextMenuInSelection (chrome-extension://hgploeanmefhfpokeenldbnhbnmnlplj/scripts/content.js:30:33)
</code></pre><p>这回报错变了，这个问题通常是由于字体文件的 MIME 类型未正确设置导致的。浏览器在下载字体文件时，会根据其 MIME 类型（例如，<code>application/font-woff2</code> 或 <code>application/x-font-ttf</code>）来解析和呈现字体。如果服务器未正确设置字体文件的 MIME 类型，浏览器可能无法正确解析字体文件，从而导致“Failed to decode downloaded font”错误。</p><p>有可能是浏览器的缓存没清理，于是我清理了缓存，终于，成功了！！！！！</p><p>ohohohoh！！！</p><p><img loading="lazy" src="/../images/image-20231214030552941.png" alt="image-20231214030552941"></p><p>至此，已成艺术，真的很激动，哈哈哈哈。</p><p>这次经历让我养成了查看浏览器控制台的习惯，要从问题根源下手。</p></div><div id="comment"><div id="twikoo-container"></div></div></div><footer id="footer"><div id="footer-wrap"><div>&copy; 2023 - 2024 Tianzhen <span id="footer-icon"><i class="fa-solid fa-font-awesome fa-fw"></i> </span>&commat;Tianzhen</div><div>Based on the <a target="_blank" rel="noopener" href="https://hexo.io">Hexo Engine</a> &amp; <a target="_blank" rel="noopener" href="https://github.com/theme-particlex/hexo-theme-particlex">ParticleX Theme</a></div><div><a href="https://icp.gov.moe/?keyword=20236514" target="_blank">萌ICP备20236514号</a> <a target="_blank" rel="noopener" href="https://beian.miit.gov.cn">豫ICP备2023040339号</a></div></div><div><span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span><script>var now=new Date;function createtime(){var n=new Date("11/07/2023 00:00:00");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("timeDate").innerHTML="本站已运行 "+dnum+" 天 ",document.getElementById("times").innerHTML=hnum+" 小时 "+mnum+" 分 "+snum+" 秒"}setInterval("createtime()",250)</script></div></footer></div><transition name="fade"><div id="preview" ref="preview" v-show="previewShow"><img id="preview-content" ref="previewContent"></div></transition></div><script src="/api/js/main.js"></script><script>twikoo.init({el:"#twikoo-container",envId:"https://twikoo.lt514.com",region:"",path:location.pathname,lang:"zh"})</script><p style="text-align:center;margin:0" id="saintwei"></p><script>var saintwei=function(r){var i="気：",n=["现在开始天晴了","天空比大海还要深，是个未知的世界","天气因你逆转，世界因你天晴","能遇见你真是太好了","不管晴天还是雨天，我只是想和你相遇","我只是想再一次的见到她啊","是你让我找到了存在的意义","无论你在哪里，我一定拼尽全力去见你","拜托了，我们就这样一直在一起","只是天空的样子，就能改变人们的心情","天空上是另一个世界，自古如此","我从来不知道，渴望蓝天的人居然有那么多","天气真的是很不可思议，光只是天空的模样就让人感动不已","这是一个只有我和她知道，关于这世界的秘密","100%的晴天女孩","在充满暴风雨的世界，一起勇敢地爱下去","那年夏天，在那个天空之上的我们，把这个世界的样貌，彻底的改变了","天空比大海还要深，是个未知的世界","重要的人，想见的人，无论晴雨，不管多远，都一定要去见你","晴天里有阳光，阳光总是充满温馨，相信有这么多朋友的厚爱和鼓励，晴天会永远阳光灿烂","天晴得像一张蓝纸，几片薄薄的白云，像被阳光晒化了似的，随风缓缓浮游着","天空澄碧，纤云不染，远山含黛，和风送暖","浅蓝色的天幕，像一幅洁净的丝绒，镶着黄色的金边","一场飘洒的雨后，阳光带着清醒的空气飞来，试问是哪位仙子的生日，阳光如此美丽","晴天的午后，夏日的阳光如水般音符一样灿烂的流动，湿澈了不同的妩媚的忧伤","天那么蓝，连一丝浮絮都没有，像被过滤了一切杂色，瑰丽地熠熠发光","神明啊!求你!求你!求你!让我再见她一次","比起晴空，我更需要阳菜，天气什么的，就这样疯狂下去也可以"].map(function(t){return t}),l=["rgb(110,64,170)","rgb(150,61,179)","rgb(191,60,175)","rgb(228,65,157)","rgb(254,75,131)","rgb(255,94,99)","rgb(255,120,71)","rgb(251,150,51)","rgb(226,183,47)","rgb(198,214,60)","rgb(175,240,91)","rgb(127,246,88)","rgb(82,246,103)","rgb(48,239,130)","rgb(29,223,163)","rgb(26,199,194)","rgb(35,171,216)","rgb(54,140,225)","rgb(76,110,219)","rgb(96,84,200)"],a={text:"",prefixP:-5,skillI:0,skillP:0,direction:"forward",delay:2,step:1};!function t(){var e=n[a.skillI];a.step?a.step--:(a.step=1,a.prefixP<i.length?(0<=a.prefixP&&(a.text+=i[a.prefixP]),a.prefixP++):"forward"===a.direction?a.skillP<e.length?(a.text+=e[a.skillP],a.skillP++):a.delay?a.delay--:(a.direction="backward",a.delay=2):0<a.skillP?(a.text=a.text.slice(0,-1),a.skillP--):(a.skillI=(a.skillI+1)%n.length,a.direction="forward")),r.textContent=a.text,r.appendChild(function(t){for(var e=document.createDocumentFragment(),r=0;r<t;r++){var i=document.createElement("span");i.textContent=String.fromCharCode(94*Math.random()+33),i.style.color=l[Math.floor(Math.random()*l.length)],e.appendChild(i)}return e}(a.prefixP<i.length?Math.min(5,5+a.prefixP):Math.min(5,e.length-a.skillP))),setTimeout(t,75)}()};saintwei(document.getElementById("saintwei"))</script></body></html>